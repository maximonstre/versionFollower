<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>TP1</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>

    <script>

        function displayTodo(todo) {
            let todoElement = document.createElement('li');

            let todoTitleElement = document.createElement('span');
            todoTitleElement.innerText = todo.title;

            let todoCheckbox = document.createElement('input');
            todoCheckbox.setAttribute('type','checkbox');

            todoCheckbox.checked = todo.completed;

            todoCheckbox.addEventListener('change', () => {
                todo.completed = todoCheckbox.checked;
                console.log('completed = ' + todo.completed);
            });

            let todoRemoveButton = document.createElement('button');
            todoRemoveButton.innerText = 'Supprimer';
            todoRemoveButton.addEventListener('click', () => {
                document.getElementById("todos")
                    .removeChild(todoElement);
            });

            todoElement.appendChild(todoTitleElement);
            todoElement.appendChild(todoCheckbox);
            todoElement.appendChild(todoRemoveButton);


            document.getElementById("todos")
                .appendChild(todoElement);
        }

        function requete(){
            console.log('requete');

            fetch("https://jsonplaceholder.typicode.com/todos")
                .then(response => response.json())
                
                .then(/**
                 * @param {Array} todos
                 * */(todos) => {
                    todos.forEach(displayTodo);
                    todos.map// autocomplete
                });
  
        }
        function effacer(){
            console.log('effacer');
            document.getElementById("todos").innerHTML = '';
        }
    </script>


    <button onclick="requete()">Requete</button>
    <button onclick="effacer()">Effacer</button>
    
    <ul id="todos"></ul>

</body>
</html>